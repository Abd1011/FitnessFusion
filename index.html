<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness Fusion - Your Ultimate Workout Partner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.2/Sortable.min.js" integrity="sha512-TelkP3PCMJv+viJSvAmmNfHixIKYSIuaPvRsv/iCRWfrM2rStVOJYmqBqvIJBxMGe8j8rBvj+gKMbREw/K+PSQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark Gray (gray-900) */
        }
        .gradient-text {
            background: linear-gradient(90deg, #94a3b8, #e2e8f0); /* Slate-400 to Slate-200 */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .card-hover-effect {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .card-hover-effect:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 25px -5px rgba(148, 163, 184, 0.1), 0 10px 10px -5px rgba(148, 163, 184, 0.04);
        }
        .btn-glow {
            box-shadow: 0 0 5px #94a3b8, 0 0 10px #94a3b8;
            transition: all 0.3s ease-in-out;
        }
        .btn-glow:hover {
            box-shadow: 0 0 15px #94a3b8, 0 0 25px #94a3b8;
        }
        .nav-link.active {
            color: #e2e8f0; /* Slate-200 */
            font-weight: 600;
        }
        #wod-log-list li, #pr-list li, .daily-exercise-item {
            background-color: #1f2937; /* Mid Gray (slate-800) */
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            border-left: 4px solid #94a3b8; /* Slate-400 */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        /* Custom style for date input */
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
        }

        /* --- Modal Styles --- */
        .modal {
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .modal.show {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background-color: #1f2937; /* slate-800 */
            margin: auto;
            padding: 2rem;
            border: 1px solid #374151; /* gray-700 */
            width: 90%;
            max-width: 500px;
            border-radius: 0.75rem;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal.show .modal-content {
            transform: scale(1);
        }

        /* --- Toast Notification Styles --- */
        .toast {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            padding: 1rem 2rem;
            background-color: #22c55e; /* green-500 */
            color: white;
            border-radius: 0.5rem;
            z-index: 200;
            transition: bottom 0.5s ease-in-out;
            font-weight: 600;
        }
        .toast.show {
            bottom: 30px;
        }
        .toast.error {
            background-color: #ef4444; /* red-500 */
        }
        
        /* --- NEW: Drag Handle Style --- */
        .drag-handle {
            cursor: grab;
            color: #6b7280; /* gray-500 */
            font-size: 1.5rem;
            line-height: 1;
            padding-right: 0.75rem;
            transition: color 0.2s;
        }
        .drag-handle:hover {
            color: #9ca3af; /* gray-400 */
        }
        /* Style for item being dragged */
        .sortable-ghost {
            opacity: 0.4;
            background: #374151; /* gray-700 */
        }
    </style>
</head>
<body class="text-slate-300">

    <div id="home-background" class="fixed inset-0 z-[-1] bg-cover bg-center hidden transition-opacity duration-500" style="background-image: linear-gradient(rgba(17, 24, 39, 0.9), rgba(17, 24, 39, 0.9)), url('https://images.unsplash.com/photo-1549060279-7e168fcee0c2?q=80&w=2070&auto=format&fit=crop');"></div>
    <div id="workouts-background" class="fixed inset-0 z-[-1] bg-cover bg-center hidden transition-opacity duration-500" style="background-image: linear-gradient(rgba(17, 24, 39, 0.9), rgba(17, 24, 39, 0.9)), url('https://images.unsplash.com/photo-1581009146145-b5ef050c2e1e?q=80&w=2070&auto=format&fit=crop');"></div>
    <div id="plan-background" class="fixed inset-0 z-[-1] bg-cover bg-center hidden transition-opacity duration-500" style="background-image: linear-gradient(rgba(17, 24, 39, 0.9), rgba(17, 24, 39, 0.9)), url('https://images.unsplash.com/photo-1574680178336-d2930ae7cd3c?q=80&w=2070&auto=format&fit=crop');"></div>
    <div id="tools-background" class="fixed inset-0 z-[-1] bg-cover bg-center hidden transition-opacity duration-500" style="background-image: linear-gradient(rgba(17, 24, 39, 0.9), rgba(17, 24, 39, 0.9)), url('https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?q=80&w=2070&auto=format&fit=crop');"></div>
    <header class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold">
                <a href="#" data-page="home" class="nav-link"><span class="gradient-text">Fitness</span>Fusion</a>
            </div>
            <div id="desktop-menu" class="hidden md:flex space-x-6 items-center">
                <a href="#" data-page="home" class="nav-link hover:text-slate-300 transition-colors">Home</a>
                <a href="#" data-page="workouts" class="nav-link hover:text-slate-300 transition-colors">Workouts</a>
                <a href="#" data-page="plan" class="nav-link hover:text-slate-300 transition-colors hidden auth-required">Workout Plan</a>
                <a href="#" data-page="tools" class="nav-link hover:text-slate-300 transition-colors">Fitness Tools</a>
                <a href="#" data-page="profile" class="nav-link hover:text-slate-300 transition-colors hidden auth-required">Profile</a>
                <button id="auth-button" class="bg-slate-200 text-slate-900 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors">Join Now</button>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-slate-200 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#" data-page="home" class="nav-link block py-2 hover:text-slate-300 transition-colors">Home</a>
            <a href="#" data-page="workouts" class="nav-link block py-2 hover:text-slate-300 transition-colors">Workouts</a>
            <a href="#" data-page="plan" class="nav-link block py-2 hover:text-slate-300 transition-colors hidden auth-required">Workout Plan</a>
            <a href="#" data-page="tools" class="nav-link block py-2 hover:text-slate-300 transition-colors">Fitness Tools</a>
            <a href="#" data-page="profile" class="nav-link block py-2 hover:text-slate-300 transition-colors hidden auth-required">Profile</a>
            <button id="mobile-auth-button" class="block mt-2 w-full text-center bg-slate-200 text-slate-900 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors">Join Now</button>
        </div>
        <div id="user-info-bar" class="bg-gray-800 text-center py-1 text-xs text-slate-400 hidden">
            Logged in as: <span id="user-email" class="font-mono text-slate-400"></span>
        </div>
    </header>

    <main id="main-content" class="container mx-auto px-6 py-12 hidden">

        <div id="page-home" class="page-content">
             <section class="text-center mb-20">
                <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">
                    Forge Your <span class="gradient-text">Strongest Self</span>
                </h1>
                <p class="text-lg md:text-xl text-slate-400 max-w-3xl mx-auto mb-8">
                    Stop wishing, start doing. Your journey to a healthier, stronger, and more confident you begins now. We provide the tools, you bring the will.
                </p>
                <a href="#" data-page-btn="workouts" class="bg-slate-200 text-slate-900 font-bold py-3 px-8 rounded-full text-lg btn-glow">
                    Explore Workouts
                </a>
            </section>
            <section class="my-20 text-center">
                <blockquote class="text-2xl md:text-3xl italic text-slate-300 max-w-4xl mx-auto">
                    "The only bad workout is the one that didn't happen."
                </blockquote>
                <cite class="block text-slate-400 mt-4">- Anonymous</cite>
            </section>
            <section class="my-20">
                <h2 class="text-3xl font-bold text-center mb-12">Benefits of Regular Exercise</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-gray-800 p-6 rounded-xl text-center card-hover-effect">
                        <h3 class="font-bold text-xl mb-2 text-white">Boosts Energy</h3>
                        <p class="text-slate-400">Improves muscle strength and boosts your endurance, giving you more energy for daily activities.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-xl text-center card-hover-effect">
                        <h3 class="font-bold text-xl mb-2 text-white">Improves Mood</h3>
                        <p class="text-slate-400">Stimulates various brain chemicals that may leave you feeling happier and more relaxed.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-xl text-center card-hover-effect">
                        <h3 class="font-bold text-xl mb-2 text-white">Better Sleep</h3>
                        <p class="text-slate-400">Regular physical activity can help you fall asleep faster and deepen your sleep.</p>
                    </div>
                    <div class="bg-gray-800 p-6 rounded-xl text-center card-hover-effect">
                        <h3 class="font-bold text-xl mb-2 text-white">Stronger Body</h3>
                        <p class="text-slate-400">Helps build and maintain strong bones, muscles, and joints, reducing risk of injury.</p>
                    </div>
                </div>
            </section>
            <section class="my-20">
                <h2 class="text-3xl font-bold text-center mb-12">Fuel Your Body</h2>
                <div class="max-w-4xl mx-auto bg-gray-800 rounded-xl overflow-x-auto">
                    <table class="w-full text-left">
                        <thead class="bg-gray-900/50">
                            <tr class="border-b border-gray-700">
                                <th class="p-4 text-lg font-semibold text-slate-300">Nutrient</th>
                                <th class="p-4 text-lg font-semibold text-slate-300">Vegetarian Sources</th>
                                <th class="p-4 text-lg font-semibold text-slate-300">Non-Vegetarian Sources</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-700">
                            <tr>
                                <td class="p-4 font-bold text-white align-top">Protein</td>
                                <td class="p-4 text-slate-300">Lentils, Chickpeas, Tofu, Paneer, Quinoa, Greek Yogurt, Nuts</td>
                                <td class="p-4 text-slate-300">Chicken Breast, Salmon, Tuna, Eggs, Lean Beef, Turkey</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-bold text-white align-top">Healthy Carbs</td>
                                <td class="p-4 text-slate-300">Oats, Brown Rice, Sweet Potatoes, Whole Grains, Fruits, Vegetables</td>
                                <td class="p-4 text-slate-300">(Sources are generally plant-based and similar for both diets)</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-bold text-white align-top">Healthy Fats</td>
                                <td class="p-4 text-slate-300">Avocado, Nuts (Almonds, Walnuts), Seeds (Chia, Flax), Olive Oil</td>
                                <td class="p-4 text-slate-300">Fatty Fish (Salmon, Mackerel), Egg Yolks, Avocado</td>
                            </tr>
                        </tbody>
                    </table>
                       <div class="p-4 text-sm text-slate-500 text-center border-t border-gray-700">This is a general guide. Consult a nutritionist for a personalized diet plan.</div>
                </div>
            </section>
        </div>

        <div id="page-workouts" class="page-content hidden">
            <section id="workouts">
                <h2 class="text-3xl font-bold text-center mb-12">Choose Your Challenge</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-gray-800 rounded-xl overflow-hidden card-hover-effect cursor-pointer" data-page-btn="cardio-exercises">
                        <img src="https://images.unsplash.com/photo-1540496905036-5937c10647cc?q=80&w=1770&auto=format&fit=crop" alt="Cardio workout" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Cardio Blast</h3>
                            <p class="text-slate-400">Get your heart pumping and burn calories with high-energy workouts designed to boost your endurance.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden card-hover-effect cursor-pointer" data-page-btn="strength-exercises">
                        <img src="https://images.unsplash.com/photo-1599058917212-d750089bc07e?q=80&w=1769&auto=format&fit=crop" alt="Strength training" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Strength & Power</h3>
                            <p class="text-slate-400">Build lean muscle, increase your strength, and sculpt your body with our targeted weight training programs.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden card-hover-effect cursor-pointer" data-page-btn="flex-exercises">
                        <img src="https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?q=80&w=1820&auto=format&fit=crop" alt="Yoga and flexibility" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Flex & Flow</h3>
                            <p class="text-slate-400">Improve your flexibility, balance, and mindfulness with guided yoga and stretching sessions.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden card-hover-effect cursor-pointer" data-page-btn="hiit-exercises">
                        <img src="https://images.unsplash.com/photo-1571902943202-507ec2618e8f?q=80&w=1887&auto=format&fit=crop" alt="HIIT" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">HIIT Intensity</h3>
                            <p class="text-slate-400">High-Intensity Interval Training to maximize fat loss and improve athletic performance in short, intense bursts.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden card-hover-effect cursor-pointer" data-page-btn="bodyweight-exercises">
                        <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?q=80&w=1770&auto=format&fit=crop" alt="Bodyweight exercises" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Bodyweight Mastery</h3>
                            <p class="text-slate-400">Use your own body as the ultimate workout tool. No equipment needed, perfect for home workouts.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden card-hover-effect cursor-pointer" data-page-btn="core-exercises">
                        <img src="https://images.unsplash.com/photo-1552196563-55cd4e45efb3?q=80&w=1926&auto=format&fit=crop" alt="Core workout" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Core Crusher</h3>
                            <p class="text-slate-400">Forge a rock-solid core with exercises designed to build stability, strength, and six-pack abs.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div id="page-plan" class="page-content hidden">
            <h2 class="text-3xl font-bold text-center mb-12">Your Workout Plan</h2>
            
            <section class="mb-12 bg-gray-800/80 backdrop-blur-sm rounded-xl p-8 max-w-2xl mx-auto card-hover-effect">
                <h3 class="text-2xl font-bold mb-6 text-center">Add a Daily Exercise</h3>
                <form id="daily-exercise-form" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="daily-exercise-name" class="block mb-2 font-medium text-slate-300">Exercise Name</label>
                            <input type="text" id="daily-exercise-name" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., Push-ups" required>
                        </div>
                        <div>
                            <label for="exercise-date" class="block mb-2 font-medium text-slate-300">Date</label>
                            <input type="date" id="exercise-date" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                            <div class="flex space-x-2 mt-2">
                                <button type="button" id="set-date-today" class="text-xs bg-gray-600 hover:bg-gray-500 text-white py-1 px-3 rounded-lg w-full">Today</button>
                                <button type="button" id="set-date-tomorrow" class="text-xs bg-gray-600 hover:bg-gray-500 text-white py-1 px-3 rounded-lg w-full">Tomorrow</button>
                            </div>
                        </div>
                        <div>
                            <label for="daily-exercise-sets" class="block mb-2 font-medium text-slate-300">Sets</label>
                            <input type="number" id="daily-exercise-sets" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., 3" required>
                        </div>
                        <div>
                            <label for="daily-exercise-reps" class="block mb-2 font-medium text-slate-300">Reps</label>
                            <input type="number" id="daily-exercise-reps" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., 12" required>
                        </div>
                    </div>
                    <button type="submit" class="w-full bg-slate-200 text-slate-900 font-bold py-3 px-8 rounded-lg text-lg hover:bg-slate-300 transition-colors">Add to Plan</button>
                </form>
            </section>
            
            <section id="daily-plan-list-section">
                <h3 class="text-2xl font-bold text-center mb-6">Upcoming Exercises</h3>
                <div id="daily-plan-list" class="space-y-6 max-w-3xl mx-auto">
                    <p class="text-center text-slate-500">Your workout plan is empty. Add an exercise to get started!</p>
                </div>
            </section>
        </div>


        <div id="page-tools" class="page-content hidden">
            <h2 class="text-3xl font-bold text-center mb-12">Fitness Tools</h2>
            <section id="wod" class="mb-20 bg-gray-800/80 backdrop-blur-sm rounded-xl p-8 md:p-12">
                <div class="text-center">
                    <h3 class="text-3xl font-bold mb-2">Workout of the Day</h3>
                    <p class="gradient-text font-semibold text-lg mb-6">"The Spartan 300"</p>
                    <div class="max-w-2xl mx-auto text-slate-400 space-y-2 mb-8">
                        <p>A full-body challenge to test your limits. Complete all reps for time.</p>
                        <ul class="font-mono text-lg text-slate-200 list-none space-y-1">
                            <li>- 50 Push-ups -</li>
                            <li>- 50 Burpees -</li>
                            <li>- 50 Kettlebell Swings -</li>
                            <li>- 50 Box Jumps -</li>
                            <li>- 50 Crunches -</li>
                            <li>- 50 Pull-ups (or Bodyweight Rows) -</li>
                        </ul>
                    </div>
                    <button id="log-wod" class="bg-slate-200 text-slate-900 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed">
                        Log Completion
                    </button>
                </div>
                <div id="wod-log" class="mt-12 max-w-3xl mx-auto">
                    <h4 class="text-2xl font-bold text-center mb-6">Completion Log</h4>
                    <ul id="wod-log-list" class="space-y-4">
                         <li class="text-center text-slate-500 !bg-transparent !border-none">Loading log...</li>
                    </ul>
                </div>
            </section>
            <section id="bmi" class="mb-20">
                <h3 class="text-3xl font-bold text-center mb-12">Calculate Your BMI</h3>
                <div class="bg-gray-800/80 backdrop-blur-sm rounded-xl p-8 max-w-2xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="height" class="block mb-2 font-medium text-slate-300">Height (cm)</label>
                            <input type="number" id="height" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., 175">
                        </div>
                        <div>
                            <label for="weight" class="block mb-2 font-medium text-slate-300">Weight (kg)</label>
                            <input type="number" id="weight" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., 70">
                        </div>
                    </div>
                    <button id="calculate-bmi" class="w-full bg-slate-200 text-slate-900 font-bold py-3 px-8 rounded-lg text-lg hover:bg-slate-300 transition-colors">
                        Calculate
                    </button>
                    <div id="bmi-result" class="mt-6 text-center text-xl font-bold hidden">
                        <p>Your BMI is: <span id="bmi-value" class="gradient-text"></span></p>
                        <p>Category: <span id="bmi-category" class="text-white"></span></p>
                    </div>
                </div>
            </section>
        </div>

        <div id="page-profile" class="page-content hidden">
            <h2 class="text-3xl font-bold text-center mb-12">Personal Records</h2>
            <section id="add-pr" class="mb-12 bg-gray-800 rounded-xl p-8 max-w-2xl mx-auto card-hover-effect">
                <h3 class="text-2xl font-bold mb-6 text-center">Log a New PR</h3>
                <form id="pr-form" class="space-y-4">
                    <div>
                        <label for="exercise-name" class="block mb-2 font-medium text-slate-300">Exercise Name</label>
                        <input type="text" id="exercise-name" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., Bench Press" required>
                    </div>
                    <div>
                        <label for="record-value" class="block mb-2 font-medium text-slate-300">Record (Weight, Reps, Time, etc.)</label>
                        <input type="text" id="record-value" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" placeholder="e.g., 100 kg for 1 rep" required>
                    </div>
                    <button type="submit" id="add-pr-btn" class="w-full bg-slate-200 text-slate-900 font-bold py-3 px-8 rounded-lg text-lg hover:bg-slate-300 transition-colors">Add Record</button>
                </form>
            </section>
            <section id="pr-list-section">
                <h3 class="text-2xl font-bold text-center mb-6">Your Records</h3>
                <ul id="pr-list" class="space-y-4 max-w-3xl mx-auto">
                    <li class="text-center text-slate-500 !bg-transparent !border-none">Loading your records...</li>
                </ul>
            </section>
        </div>

        <div id="page-cardio-exercises" class="page-content hidden">
             <section>
                <h2 class="text-3xl font-bold text-center mb-12">Cardio Blast Exercises</h2>
                <div class="space-y-8">
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/yPHZsEHVxjKWOW2A9wGDUH0QdzArzlV9_4LTywxSbNg/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzE1LzQ1LzQ1Lzkz/LzM2MF9GXzE1NDU0/NTkzNjRfZ1I3ek05/c1ByY2ZLbWtmWldB/UHhKQko4dkxkWnhl/RTYuanBn" alt="Burpees" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Burpees</h3>
                            <p class="text-slate-400">The ultimate full-body exercise. Start standing, drop to a squat, kick your feet back to a plank, do a push-up, return to squat, and jump up explosively.</p>
                        </div>
                    </div>
                     <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/M23bhokGRSHR2Sbl1Go1jQYk1DKcu5hlDqqKA-osggo/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5nZXR0eWltYWdl/cy5jb20vaWQvOTA2/NTExNzkyL3Bob3Rv/L2p1bXAtcm9wZS1l/eGVyY2lzZS5qcGc_/cz02MTJ4NjEyJnc9/MCZrPTIwJmM9eUdX/ai1VNTlBb01tbUtl/TW5kd2pURVBQelFz/LV96aTRNb3ZQZXpK/d3V3cz0" alt="Rope Skipping" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Rope Skipping</h3>
                            <p class="text-slate-400">Excellent for footwork, coordination, and high-intensity cardio. Keep your core tight and jump just high enough to clear the rope.</p>
                        </div>
                    </div>
                     <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/NoNNjdNI5k7DDg7_o2jGFc28P4GIuIeqNf1Uzo_plZ4/rs:fit:500:0:1:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzAxLzc1LzkzLzk1/LzM2MF9GXzE3NTkz/OTU4Nl9iQUd5UlA5/VWdjdUQxN3YwSUpQ/ZVZQNFNxME82cnFx/Si5qcGc" alt="Running on Treadmill" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Running (Treadmill)</h3>
                            <p class="text-slate-400">A classic cardiovascular exercise. Adjust speed and incline to match your fitness level. Focus on maintaining a consistent pace and good form.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://www.americanfitness.net/cdn/shop/collections/SK2000.jpg?v=1741075754&width=1500" alt="Stair Climbing" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Stair Climbing</h3>
                            <p class="text-slate-400">A high-intensity, low-impact workout that targets your glutes, quads, and hamstrings while elevating your heart rate.</p>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-12">
                    <button data-page-btn="workouts" class="text-slate-300 hover:text-white underline"> &larr; Back to All Workout Categories</button>
                </div>
            </section>
        </div>
        <div id="page-strength-exercises" class="page-content hidden">
            <section>
                <h2 class="text-3xl font-bold text-center mb-12">Strength & Power Exercises</h2>
                <div class="space-y-8">
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/IuLdJ7EGv4RUqG0YVqlKFVRhOhIPWXO0can-DR0__qw/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5nZXR0eWltYWdl/cy5jb20vaWQvNDkx/MTg4NDc0L3Bob3Rv/L2hpc3BhbmljLW1h/bi1zdHJlbmd0aC10/cmFpbmluZy5qcGc_/cz02MTJ4NjEyJnc9/MCZrPTIwJmM9aFBt/RGhIcGprQUJQb3Jn/N0dxNHBLVENLZnBF/VTA2anhORnNOOWU1/SUpiVT0" alt="Squats" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Barbell Squats</h3>
                            <p class="text-slate-400">Develops lower body strength. Keep your chest up, back straight, and descend until your thighs are parallel to the floor.</p>
                        </div>
                    </div>
                     <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/pLp649oXQLmVhRa0UvPYOlkTbJuMAQTIOICmhzkS3n4/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5nZXR0eWltYWdl/cy5jb20vaWQvOTY0/MDEyOTg2L3Bob3Rv/L21hbi1kb2luZy1w/dWxsLXVwcy1pbi10/aGUtbG9jYWwtcGFy/ay5qcGc_cz02MTJ4/NjEyJnc9MCZrPTIw/JmM9WG84LVlzMFpL/c0ZGdzdWb0ZtVjRo/aDlZbHJrV2hmUUsx/RWs0eDNKMVRPZz0" alt="Pull-ups" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Pull-ups</h3>
                            <p class="text-slate-400">The ultimate test of back and bicep strength. Start from a dead hang and pull your chin over the bar without swinging.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/gddaKhQln83f6Uhw8uTl1e_C_UM58u-s7tT7tU314v0/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzAwLzYzLzQzLzI5/LzM2MF9GXzYzNDMy/OTk5X00xSnJpeXZZ/Wlg2Q1R4U2xUOUtz/cUdLTFQ1TmlSZXFl/LmpwZw" alt="Bench Press" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Bench Press</h3>
                            <p class="text-slate-400">A foundational upper body exercise targeting the chest, shoulders, and triceps. Keep your feet planted and back flat on the bench.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/jLpbi1efROBAYfNRxYNFjxqVxHQUOHQ0jtpAaITWS20/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5nZXR0eWltYWdl/cy5jb20vaWQvMTA4/OTEyODE4NC9waG90/by93b21hbi1nZXR0/aW5nLXJlYWR5LWZv/ci1kZWFkbGlmdC5q/cGc_cz02MTJ4NjEy/Jnc9MCZrPTIwJmM9/Wk8td1FCS2tNZ0FF/X2tlSFc4WGF6S1Zw/SnZrdUVhcTJ1QXBJ/Ny0zc3pjQT0" alt="Deadlifts" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Deadlifts</h3>
                            <p class="text-slate-400">A full-body strength builder. Maintain a neutral spine and lift the weight by driving through your legs and extending your hips.</p>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-12">
                    <button data-page-btn="workouts" class="text-slate-300 hover:text-white underline"> &larr; Back to All Workout Categories</button>
                </div>
            </section>
        </div>
        <div id="page-flex-exercises" class="page-content hidden">
            <section>
                <h2 class="text-3xl font-bold text-center mb-12">Flex & Flow Exercises</h2>
                <div class="space-y-8">
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/kiIKQq3OP9xbkySrXBSdX5mujyejUNZ5i5jl1IRkCF8/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5pc3RvY2twaG90/by5jb20vaWQvNjky/OTA4NjMwL3Bob3Rv/L3lvZ2Etd29tYW4t/aW4tZG93bndhcmQt/ZmFjaW5nLWRvZy1w/b3NlLmpwZz9zPTYx/Mng2MTImdz0wJms9/MjAmYz1TZm01ajl5/WEs3MXFGc1ZjcF9I/SFlEakwwX0V4clVL/dm91ZVcxc2szOVg4/PQ" alt="Downward-Facing Dog" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Downward-Facing Dog</h3>
                            <p class="text-slate-400">A foundational yoga pose. Form a triangle with your body, press your heels toward the floor, and relax your head and neck.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/SlgTazVjfLIy7DtLZsfXZgpxeM8uvPMGZDAoGP-59GY/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9saWZv/cm1lLmNvbS9jZG4v/c2hvcC9hcnRpY2xl/cy9CbG9nLUhlYWRl/ci1JbWFnZV9mMDZk/N2E5OC0wZmUwLTQ1/ZjgtODdmMi1mNWQ3/NWNlYjU4OWUud2Vi/cD92PTE3NTA0MzA0/NDY" alt="Pigeon Pose" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Pigeon Pose</h3>
                            <p class="text-slate-400">An excellent hip opener. Bring one knee forward toward your wrist and extend the other leg back, keeping your hips square.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://images.unsplash.com/photo-1518611012118-696072aa579a?q=80&w=1770&auto=format&fit=crop" alt="Pilates" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Pilates Hundred</h3>
                            <p class="text-slate-400">A classic Pilates exercise for core strength and stabilization. Lie on your back, lift your head and legs, and pump your arms vigorously.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://images.unsplash.com/photo-1545205597-3d9d02c29597?q=80&w=1770&auto=format&fit=crop" alt="Cat-Cow Stretch" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Cat-Cow Stretch</h3>
                            <p class="text-slate-400">Improves spinal flexibility and relieves tension. On all fours, alternate between arching your back (Cat) and scooping your spine (Cow).</p>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-12">
                    <button data-page-btn="workouts" class="text-slate-300 hover:text-white underline"> &larr; Back to All Workout Categories</button>
                </div>
            </section>
        </div>
        <div id="page-hiit-exercises" class="page-content hidden">
             <section>
                <h2 class="text-3xl font-bold text-center mb-12">HIIT Intensity Exercises</h2>
                <div class="space-y-8">
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/0FN28wQ_CwbinLVu0-MvPApTwrWkJW_LVNFVNfhBrjs/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5nZXR0eWltYWdl/cy5jb20vaWQvMTI4/NTMxMzYxNS9waG90/by9tYW4tZG9pbmct/a2V0dGxlYmVsbC1z/d2luZ3Mtd2hpbGUt/d29ya2luZy1vdXQt/YXQtb3V0ZG9vci1n/eW0uanBnP3M9NjEy/eDYxMiZ3PTAmaz0y/MCZjPVUxWXVNZFND/QkVFRERGRk43ZGZl/cDZiTkcwRm1WeGRS/dnU0Nnpyby1Kb0U9" alt="Kettlebell Swings" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Kettlebell Swings</h3>
                            <p class="text-slate-400">A powerful, explosive exercise. Hinge at your hips, keep your back straight, and use your glutes and hamstrings to drive the kettlebell up to chest level.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/LxyzZFxsB5S5oZWC2bEYQm1gYMPt6ahg_2D5vD3g0xY/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9oaXBz/LmhlYXJzdGFwcHMu/Y29tL2htZy1wcm9k/L2ltYWdlcy9mb3Vy/LXBlb3BsZS1kb2lu/Zy1ib3gtanVtcHMt/aW4tY3Jvc3MtdHJh/aW5pbmctY2xhc3Mt/cm95YWx0eS1mcmVl/LWltYWdlLTE2NTEw/Njc0MTMuanBnP2Ny/b3A9MXh3OjAuODQy/OTZ4aDswLDAuMDkz/NXhoJnJlc2l6ZT0x/MjAwOio" alt="Box Jumps" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Box Jumps</h3>
                            <p class="text-slate-400">Builds explosive power. Stand in front of a sturdy box, swing your arms, and jump explosively onto the center of the box, landing softly.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/QN4HBKo2k2Hs6t3yNJObG7wpNVmfTy7pjyPNj5FOVsw/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly90aHVt/YnMuZHJlYW1zdGlt/ZS5jb20vYi9jcm9z/c2ZpdC1iYXR0bGUt/cm9wZXMtZXhlcmNp/c2UtYXRsZXRlLXRy/YWluaW5nLXdvcmtv/dXQtZ3ltLWNyb3Nz/Zml0LWJhdHRsZS1y/b3Blcy1leGVyY2lz/ZS1hdGxldGUtdHJh/aW5pbmctMTQyNTQ0/MDQyLmpwZw" alt="Battle Ropes" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Battle Ropes</h3>
                            <p class="text-slate-400">An intense upper body and core workout. Create waves, slams, or spirals with the ropes for a high-intensity cardio and strength challenge.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/H1KVZABLKoj66oBQTt9QiPGNCU7-wD9CFtsE8B-qNp4/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9jb250/ZW50cy5tZWRpYWRl/Y2F0aGxvbi5jb20v/cDIxODMyNzMvayRl/MzI5NTQ3MzI5MzAz/MzY2NTFjMzE0MTNi/ODQ2NmFkZi8xOTIw/eDAvMjAwMHB0MTUx/OC80MDAweGNyMjI1/MC9Nb3VudGFpbi1j/bGltYmVycy0tdHJh/dmFpbGxlei1sZS1j/YXJkaW8tZXQtbGVz/LWFiZG9taW5hdXgu/anBnP2Zvcm1hdD1h/dXRv" alt="Mountain Climbers" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Mountain Climbers</h3>
                            <p class="text-slate-400">A dynamic, full-body exercise. From a plank position, alternate driving your knees towards your chest as quickly as possible.</p>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-12">
                    <button data-page-btn="workouts" class="text-slate-300 hover:text-white underline"> &larr; Back to All Workout Categories</button>
                </div>
            </section>
        </div>
        <div id="page-bodyweight-exercises" class="page-content hidden">
             <section>
                <h2 class="text-3xl font-bold text-center mb-12">Bodyweight Mastery Exercises</h2>
                <div class="space-y-8">
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://images.unsplash.com/photo-1598971457999-ca4ef48a9a71?q=80&w=1770&auto=format&fit=crop" alt="Push-ups" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Push-ups</h3>
                            <p class="text-slate-400">A classic exercise for chest, shoulders, and triceps. Keep your body in a straight line from head to heels and lower your chest to the floor.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/XlsZo_1hgMGM7zwQArRZAKzdoJtITxhCQWeAuNYPb-I/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzA4LzQ3LzgxLzQx/LzM2MF9GXzg0Nzgx/NDE3NV9HM1dXR3hU/eTg2WnY1Zkpockd2/UGxIZHJ1SnoyUDZL/US5qcGc" alt="Lunges" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Lunges</h3>
                            <p class="text-slate-400">Targets quads, glutes, and hamstrings. Step forward with one leg and lower your hips until both knees are bent at a 90-degree angle.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/9fs8bVFwvjq_CF5lLyyHGpRP-GxIvIdaOZvKI1aXksM/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93d3cu/Z3J4c3RhdGljLmNv/bS80ZjNyZ3F3emR6/bmovMzZNTXJCMlNL/QXVlRVJxdGhnRHVj/NS83ZGFmNjZmZWIx/YjNiZjg5MzhlNDJl/MDBjNmYzN2QyNS9n/bHV0ZV9icmlkZ2Vf/ZXhlcmNpc2VfMTQ2/NjQ5MjkwNS5qcGc_/dz0zODQwJnE9OTkm/Zm09d2VicA" alt="Glute Bridges" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Glute Bridges</h3>
                            <p class="text-slate-400">Activates and strengthens your glutes and hamstrings. Lie on your back, bend your knees, and lift your hips toward the ceiling.</p>
                        </div>
                    </div>
                     <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/Psi5m0xPISMm_oHH6zgBtY39nOHGNHmnYSx-x7w1ou8/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93d3cu/ZGlyLmNhdC9ibG9n/L3dwLWNvbnRlbnQv/dXBsb2Fkcy8yMDE5/LzA1L3ZpZGVvLXR1/dG9yaWFsLWFpci1z/cXVhdC5qcGc" alt="Air Squats" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Air Squats</h3>
                            <p class="text-slate-400">The foundational bodyweight squat. Focus on proper form: chest up, weight in your heels, and sinking your hips back and down.</p>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-12">
                    <button data-page-btn="workouts" class="text-slate-300 hover:text-white underline"> &larr; Back to All Workout Categories</button>
                </div>
            </section>
        </div>
        <div id="page-core-exercises" class="page-content hidden">
             <section>
                <h2 class="text-3xl font-bold text-center mb-12">Core Crusher Exercises</h2>
                <div class="space-y-8">
                     <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/LhPK9ViWzFBNqdRZ4tu2dD96EjYGjAPrjFdHqjRXBUo/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5nZXR0eWltYWdl/cy5jb20vaWQvNTkw/NTc1MTg5L3Bob3Rv/L2F0aGxldGljLW1h/bi1kb2luZy10aGUt/cGxhbmstZm9yLWFi/cy1hbmQtY29yZS5q/cGc_cz02MTJ4NjEy/Jnc9MCZrPTIwJmM9/YmVSeFE3WHYwZXB6/LXRNTk1vUUhSTWRa/QTlmZGNGREdLdFF6/eWNVRkxEZz0" alt="Plank" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Plank</h3>
                            <p class="text-slate-400">Builds incredible core stability. Hold a push-up position, keeping your body in a perfectly straight line. Engage your abs and glutes.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/ofeUPtMgNIFkqDha1pFTkY4_bFGtmtFLkg-w-SYqv7s/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWFn/ZXMuY3RmYXNzZXRz/Lm5ldC8zczVpbzZt/bnhmcXovNDVJZkU0/MUpnMWdJRG1hMFgw/S2FtUy9mMjY1Yjlm/ZWY5MGRkYzYyMjY0/NzJkYjlkODM1ZDhi/YS9NYXN0ZXJDbGFz/c1NFT19IYW5naW5n/X0xlZ19SYWlzZXNf/VFdPX0hFUk8uanBn/P3c9MTkyMA" alt="Leg Raises" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Leg Raises</h3>
                            <p class="text-slate-400">Targets the lower abdominals. Lie on your back, keep your legs straight, and raise them towards the ceiling until your body is in an L-shape.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/H_7T-5rmxzOn74ltxFT6kuFLq3tKJWgzMMFi-SFuBwg/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9jZG4u/bW9zLmNtcy5mdXR1/cmVjZG4ubmV0LzY1/R1NQb21HUEJpOTZU/SlNiZWhBWGUuanBn" alt="Russian Twists" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Russian Twists</h3>
                            <p class="text-slate-400">Targets the obliques. Sit on the floor, lean back slightly, lift your feet, and twist your torso from side to side.</p>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl overflow-hidden flex flex-col md:flex-row items-center card-hover-effect">
                        <img src="https://imgs.search.brave.com/wvL70A8Xd3ne_Db04EJBdn6IakrcOxoQBAoE8MY2eV4/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9iYXJi/ZW5kLmNvbS93cC1j/b250ZW50L3VwbG9h/ZHMvMjAyMy8wNy9i/aWN5Y2xlLWNydW5j/aC13b3Jrb3V0LWJh/cmJlbmQuY29tXy5q/cGc" alt="Bicycle Crunches" class="w-full md:w-48 h-48 md:h-full object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold mb-2 text-slate-300">Bicycle Crunches</h3>
                            <p class="text-slate-400">A great all-around ab exercise. Lie on your back and bring opposite knee to opposite elbow in a pedaling motion.</p>
                        </div>
                    </div>
                </div>
                 <div class="text-center mt-12">
                    <button data-page-btn="workouts" class="text-slate-300 hover:text-white underline"> &larr; Back to All Workout Categories</button>
                </div>
            </section>
        </div>
    </main>

    <div id="page-auth" class="min-h-screen flex flex-col items-center justify-center p-4 bg-cover bg-center bg-no-repeat" style="background-image: linear-gradient(rgba(17, 24, 39, 0.8), rgba(17, 24, 39, 0.8)), url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=2070&auto=format&fit=crop');">
        <div class="w-full max-w-md text-center">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2"><a href="#" data-page="home" class="nav-link"><span class="gradient-text">Fitness</span>Fusion</a></h1>
            <p class="text-slate-400 mb-8" id="auth-subtitle">Login to unleash your potential.</p>
            <div id="login-container" class="bg-gray-900/60 backdrop-blur-sm p-8 rounded-2xl shadow-2xl border border-gray-700 text-left">
                <h2 class="text-2xl font-bold text-center mb-6 text-white">Login</h2>
                <form id="login-form">
                    <div class="mb-4">
                        <label for="login-email" class="block mb-2 font-medium text-slate-300">Email</label>
                        <input type="email" id="login-email" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="login-password" class="block mb-2 font-medium text-slate-300">Password</label>
                        <input type="password" id="login-password" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <button type="submit" class="w-full bg-slate-200 text-slate-900 font-bold py-3 rounded-lg hover:bg-slate-300 transition-colors btn-glow">Login</button>
                </form>
                <p id="login-error" class="text-red-400 text-center mt-4"></p>
                <p class="text-center mt-4 text-slate-400">
                    Don't have an account? <a href="#" id="show-signup" class="font-medium text-slate-300 hover:underline">Sign Up</a>
                </p>
            </div>
            <div id="signup-container" class="bg-gray-900/60 backdrop-blur-sm p-8 rounded-2xl shadow-2xl border border-gray-700 text-left hidden">
                <h2 class="text-2xl font-bold text-center mb-6 text-white">Create Account</h2>
                <form id="signup-form">
                    <div class="mb-4">
                        <label for="signup-email" class="block mb-2 font-medium text-slate-300">Email</label>
                        <input type="email" id="signup-email" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <div class="mb-6">
                        <label for="signup-password" class="block mb-2 font-medium text-slate-300">Password</label>
                        <input type="password" id="signup-password" class="w-full bg-gray-700/50 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <button type="submit" class="w-full bg-slate-200 text-slate-900 font-bold py-3 rounded-lg hover:bg-slate-300 transition-colors btn-glow">Create Account</button>
                </form>
                <p id="signup-error" class="text-red-400 text-center mt-4"></p>
                <p class="text-center mt-4 text-slate-400">
                    Already have an account? <a href="#" id="show-login" class="font-medium text-slate-300 hover:underline">Login</a>
                </p>
            </div>
        </div>
    </div>


    <footer class="bg-gray-900">
        <div class="container mx-auto px-6 py-8 text-center text-slate-400">
            <p>&copy; 2025 Fitness Fusion. All Rights Reserved.</p>
            <p class="mt-2">Made by Abdullah with </p>
        </div>
    </footer>
    
    <div id="toast-notification" class="toast">
        This is a toast message!
    </div>

    <div id="edit-pr-modal" class="modal">
        <div class="modal-content">
            <h3 class="text-2xl font-bold mb-6 text-center text-white">Edit Personal Record</h3>
            <form id="edit-pr-form" class="space-y-4">
                <input type="hidden" id="edit-pr-id">
                <div>
                    <label for="edit-exercise-name" class="block mb-2 font-medium text-slate-300">Exercise Name</label>
                    <input type="text" id="edit-exercise-name" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                </div>
                <div>
                    <label for="edit-record-value" class="block mb-2 font-medium text-slate-300">Record</label>
                    <input type="text" id="edit-record-value" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                </div>
                <div class="flex gap-4 mt-6">
                    <button type="button" id="cancel-edit-pr" class="w-full bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-500 transition-colors">Cancel</button>
                    <button type="submit" class="w-full bg-slate-200 text-slate-900 font-bold py-3 px-8 rounded-lg hover:bg-slate-300 transition-colors">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <div id="delete-pr-modal" class="modal">
        <div class="modal-content">
            <h3 class="text-2xl font-bold mb-4 text-center text-white">Are you sure?</h3>
            <p class="text-slate-400 text-center mb-8">This action cannot be undone. This will permanently delete your personal record.</p>
            <div class="flex gap-4">
                <button type="button" id="cancel-delete-pr" class="w-full bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-500 transition-colors">Cancel</button>
                <button type="button" id="confirm-delete-pr" class="w-full bg-red-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-red-500 transition-colors mt-4">Delete</button>
            </div>
        </div>
    </div>

    <div id="edit-plan-modal" class="modal">
        <div class="modal-content">
            <h3 class="text-2xl font-bold mb-6 text-center text-white">Edit Plan Exercise</h3>
            <form id="edit-plan-form" class="space-y-4">
                <input type="hidden" id="edit-plan-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="edit-daily-exercise-name" class="block mb-2 font-medium text-slate-300">Exercise Name</label>
                        <input type="text" id="edit-daily-exercise-name" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <div>
                        <label for="edit-exercise-date" class="block mb-2 font-medium text-slate-300">Date</label>
                        <input type="date" id="edit-exercise-date" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <div>
                        <label for="edit-daily-exercise-sets" class="block mb-2 font-medium text-slate-300">Sets</label>
                        <input type="number" id="edit-daily-exercise-sets" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                    <div>
                        <label for="edit-daily-exercise-reps" class="block mb-2 font-medium text-slate-300">Reps</label>
                        <input type="number" id="edit-daily-exercise-reps" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:ring-slate-500 focus:border-slate-500" required>
                    </div>
                </div>
                <div class="flex gap-4 mt-6">
                    <button type="button" id="cancel-edit-plan" class="w-full bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-500 transition-colors">Cancel</button>
                    <button type="submit" class="w-full bg-slate-200 text-slate-900 font-bold py-3 px-8 rounded-lg hover:bg-slate-300 transition-colors">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <div id="delete-plan-modal" class="modal">
        <div class="modal-content">
            <h3 class="text-2xl font-bold mb-4 text-center text-white">Are you sure?</h3>
            <p class="text-slate-400 text-center mb-8">This action cannot be undone. This will permanently delete this exercise from your plan.</p>
            <div class="flex gap-4">
                <button type="button" id="cancel-delete-plan" class="w-full bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-500 transition-colors">Cancel</button>
                <button type="button" id="confirm-delete-plan" class="w-full bg-red-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-red-500 transition-colors mt-4">Delete</button>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, collection, addDoc, onSnapshot, query, Timestamp, doc, deleteDoc, updateDoc,
            getDocs, limit, orderBy, where, writeBatch
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Firebase Config (Identical) ---
        const firebaseConfig = {
         apiKey: "AIzaSyCU1sP2cQgdPALgNJOPbOEqsOd_Xj4CTZk",
         authDomain: "fitnessfusion3713.firebaseapp.com",
         projectId: "fitnessfusion3713",
         storageBucket: "fitnessfusion3713.firebasestorage.app",
         messagingSenderId: "2702663748",
         appId: "1:2702663748:web:7649a7206891b10456dc11",
         measurementId: "G-QJY09CY9G2"
        };
        // ------------------------------------------------------------------

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = firebaseConfig.appId;

        // --- UI Elements (Identical) ---
        const mainContent = document.getElementById('main-content');
        const authPage = document.getElementById('page-auth');
        // ... (all other UI elements are identical) ...
        const loginContainer = document.getElementById('login-container');
        const signupContainer = document.getElementById('signup-container');
        const userInfoBar = document.getElementById('user-info-bar');
        const userEmailSpan = document.getElementById('user-email');
        const authButton = document.getElementById('auth-button');
        const mobileAuthButton = document.getElementById('mobile-auth-button');
        const authRequiredLinks = document.querySelectorAll('.auth-required');

        // --- Modal & Toast Elements (Identical) ---
        const toastElement = document.getElementById('toast-notification');
        const editPrModal = document.getElementById('edit-pr-modal');
        const editPrForm = document.getElementById('edit-pr-form');
        const cancelEditPrBtn = document.getElementById('cancel-edit-pr');
        const deletePrModal = document.getElementById('delete-pr-modal');
        const cancelDeletePrBtn = document.getElementById('cancel-delete-pr');
        const confirmDeletePrBtn = document.getElementById('confirm-delete-pr');
        const editPlanModal = document.getElementById('edit-plan-modal');
        const editPlanForm = document.getElementById('edit-plan-form');
        const cancelEditPlanBtn = document.getElementById('cancel-edit-plan');
        const deletePlanModal = document.getElementById('delete-plan-modal');
        const cancelDeletePlanBtn = document.getElementById('cancel-delete-plan');
        const confirmDeletePlanBtn = document.getElementById('confirm-delete-plan');

        let dbListeners = []; 
        let prCollectionPath = ''; 
        let dailyPlanCollectionPath = ''; 
        let docIdToDelete = null; 
        let docIdToEdit = null; 
        let docIdToDeletePlan = null; 
        let docIdToEditPlan = null; 


        // --- Toast & Modal Functions (All Identical) ---
        function showToast(message, isError = false) {
            toastElement.textContent = message;
            toastElement.className = 'toast show'; 
            if (isError) {
                toastElement.classList.add('error');
            }
            setTimeout(() => {
                toastElement.classList.remove('show');
            }, 3000);
        }
        function openEditModal(id, name, value) {
            docIdToEdit = id;
            document.getElementById('edit-pr-id').value = id;
            document.getElementById('edit-exercise-name').value = name;
            document.getElementById('edit-record-value').value = value;
            editPrModal.classList.add('show');
        }
        function closeEditModal() {
            docIdToEdit = null;
            editPrModal.classList.remove('show');
        }
        function openDeleteModal(id) {
            docIdToDelete = id;
            deletePrModal.classList.add('show');
        }
        function closeDeleteModal() {
            docIdToDelete = null;
            deletePrModal.classList.remove('show');
        }
        function openEditPlanModal(id, name, date, sets, reps) {
            docIdToEditPlan = id;
            document.getElementById('edit-plan-id').value = id;
            document.getElementById('edit-daily-exercise-name').value = name;
            document.getElementById('edit-exercise-date').value = date;
            document.getElementById('edit-daily-exercise-sets').value = sets;
            document.getElementById('edit-daily-exercise-reps').value = reps;
            editPlanModal.classList.add('show');
        }
        function closeEditPlanModal() {
            docIdToEditPlan = null;
            editPlanModal.classList.remove('show');
        }
        function openDeletePlanModal(id) {
            docIdToDeletePlan = id;
            deletePlanModal.classList.add('show');
        }
        function closeDeletePlanModal() {
            docIdToDeletePlan = null;
            deletePlanModal.classList.remove('show');
        }

        // --- Modal Event Listeners (All Identical) ---
        cancelEditPrBtn.addEventListener('click', closeEditModal);
        cancelDeletePrBtn.addEventListener('click', closeDeleteModal);
        editPrForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const newName = document.getElementById('edit-exercise-name').value.trim();
            const newValue = document.getElementById('edit-record-value').value.trim();
            if (!newName || !newValue || !docIdToEdit) return;
            try {
                const docRef = doc(db, prCollectionPath, docIdToEdit);
                await updateDoc(docRef, { exerciseName: newName, recordValue: newValue });
                showToast('PR updated successfully!');
                closeEditModal();
            } catch (err) {
                console.error("Error updating PR: ", err);
                showToast('Error updating PR.', true);
            }
        });
        confirmDeletePrBtn.addEventListener('click', async () => {
            if (!docIdToDelete) return;
            try {
                await deleteDoc(doc(db, prCollectionPath, docIdToDelete));
                showToast('PR deleted successfully!');
                closeDeleteModal();
            } catch (err) {
                console.error("Error deleting PR: ", err);
                showToast('Error deleting PR.', true);
                closeDeleteModal();
            }
        });
        cancelEditPlanBtn.addEventListener('click', closeEditPlanModal);
        cancelDeletePlanBtn.addEventListener('click', closeDeletePlanModal);
        editPlanForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const newName = document.getElementById('edit-daily-exercise-name').value.trim();
            const newDate = document.getElementById('edit-exercise-date').value;
            const newSets = document.getElementById('edit-daily-exercise-sets').value;
            const newReps = document.getElementById('edit-daily-exercise-reps').value;
            if (!newName || !newDate || !newSets || !newReps || !docIdToEditPlan) return;
            try {
                const docRef = doc(db, dailyPlanCollectionPath, docIdToEditPlan);
                await updateDoc(docRef, {
                    exerciseName: newName,
                    exerciseDate: newDate,
                    sets: newSets,
                    reps: newReps
                });
                showToast('Plan updated successfully!');
                closeEditPlanModal();
            } catch (err) {
                console.error("Error updating plan: ", err);
                showToast('Error updating plan.', true);
            }
        });
        confirmDeletePlanBtn.addEventListener('click', async () => {
            if (!docIdToDeletePlan) return;
            try {
                await deleteDoc(doc(db, dailyPlanCollectionPath, docIdToDeletePlan));
                showToast('Exercise removed from plan.');
                closeDeletePlanModal();
            } catch (err) {
                console.error("Error deleting plan item: ", err);
                showToast('Error removing exercise.', true);
                closeDeletePlanModal();
            }
        });


        // --- Auth State Logic (Identical) ---
        onAuthStateChanged(auth, user => {
            dbListeners.forEach(unsubscribe => unsubscribe());
            dbListeners = [];
            if (user) {
                mainContent.classList.remove('hidden');
                authPage.classList.add('hidden');
                userInfoBar.classList.remove('hidden');
                userEmailSpan.textContent = user.email;
                authButton.textContent = 'Log Out';
                mobileAuthButton.textContent = 'Log Out';
                authRequiredLinks.forEach(link => link.classList.remove('hidden'));
                prCollectionPath = `/artifacts/${appId}/users/${user.uid}/personal_records`;
                dailyPlanCollectionPath = `/artifacts/${appId}/users/${user.uid}/daily_plan`;
                setupDbListeners(user.uid);
                showPage('home');
            } else {
                mainContent.classList.add('hidden');
                authPage.classList.remove('hidden');
                userInfoBar.classList.add('hidden');
                userEmailSpan.textContent = '';
                authButton.textContent = 'Join Now';
                mobileAuthButton.textContent = 'Join Now';
                authRequiredLinks.forEach(link => link.classList.add('hidden'));
                showPage('auth');
            }
        });

        // --- Database Listeners Function (Updated) ---
        function setupDbListeners(userId) {
            // WOD Logic (Identical)
            const wodLogList = document.getElementById('wod-log-list');
            const wodCollectionPath = `/artifacts/${appId}/public/data/wod_completions`;
            const wodCollectionRef = collection(db, wodCollectionPath);
            const unsubWod = onSnapshot(query(wodCollectionRef), (snapshot) => {
                wodLogList.innerHTML = snapshot.empty ? '<li class="text-center text-slate-500 !bg-transparent !border-none">Be the first to complete the workout!</li>' : '';
                if (!snapshot.empty) {
                    const completions = snapshot.docs.map(doc => doc.data());
                    completions.sort((a, b) => b.completedAt.seconds - a.completedAt.seconds);
                    completions.forEach(data => {
                        const li = document.createElement('li');
                        const userHandle = data.userEmail ? data.userEmail.split('@')[0] : 'Anonymous';
                        li.innerHTML = `<span><span class="font-bold text-white">${userHandle}</span> completed</span> <span class="text-slate-400">${data.completedAt.toDate().toLocaleDateString()}</span>`;
                        wodLogList.appendChild(li);
                    });
                }
            }, console.error);
            dbListeners.push(unsubWod);
            document.getElementById('log-wod').onclick = async (e) => {
                if (!auth.currentUser) return;
                e.target.disabled = true;
                e.target.textContent = 'Logging...';
                try {
                    await addDoc(wodCollectionRef, { userId, userEmail: auth.currentUser.email, completedAt: Timestamp.now(), workout: "The Spartan 300" });
                    e.target.textContent = 'Completed!';
                    showToast('WOD logged! Great work!');
                } catch (err) {
                    console.error("Error adding document: ", err);
                    e.target.textContent = 'Log Completion';
                    e.target.disabled = false;
                    showToast('Error logging WOD.', true);
                }
            };
            
            // PR Logic (Identical)
            const prForm = document.getElementById('pr-form');
            const prList = document.getElementById('pr-list');
            const prCollectionRef = collection(db, prCollectionPath);
            const unsubPr = onSnapshot(query(prCollectionRef), (snapshot) => {
                prList.innerHTML = '';
                if (snapshot.empty) {
                    prList.innerHTML = '<li class="text-center text-slate-500 !bg-transparent !border-none">Log your first personal record above!</li>';
                    return;
                }
                const records = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                records.sort((a, b) => b.createdAt.seconds - a.createdAt.seconds);
                records.forEach(data => {
                    const li = document.createElement('li');
                    const date = data.createdAt.toDate().toLocaleDateString();
                    li.innerHTML = `
                        <div>
                            <p class="font-bold text-lg text-white">${data.exerciseName}</p>
                            <p class="text-slate-400">${data.recordValue}</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <span class="text-sm text-slate-500">${date}</span>
                            <button 
                                data-id="${data.id}" 
                                data-name="${data.exerciseName}" 
                                data-value="${data.recordValue}"
                                class="edit-pr-btn text-blue-400 hover:text-blue-300 text-lg font-medium">Edit</button>
                            <button 
                                data-id="${data.id}" 
                                class="delete-pr-btn text-rose-500 hover:text-rose-400 text-2xl font-bold">&times;</button>
                        </div>
                    `;
                    prList.appendChild(li);
                });
            }, console.error);
            dbListeners.push(unsubPr);
            prForm.onsubmit = async (e) => {
                e.preventDefault();
                const exerciseName = document.getElementById('exercise-name').value.trim();
                const recordValue = document.getElementById('record-value').value.trim();
                if (!exerciseName || !recordValue) return;
                try {
                    await addDoc(prCollectionRef, { exerciseName, recordValue, createdAt: Timestamp.now() });
                    prForm.reset();
                    showToast('PR added successfully!'); 
                } catch (err) { 
                    console.error("Error adding PR: ", err); 
                    showToast('Error adding PR.', true); 
                }
            };
            prList.onclick = async (e) => {
                if (e.target && e.target.classList.contains('delete-pr-btn')) {
                    const docId = e.target.dataset.id;
                    if (docId) {
                        openDeleteModal(docId); 
                    }
                }
                if (e.target && e.target.classList.contains('edit-pr-btn')) {
                    const docId = e.target.dataset.id;
                    const name = e.target.dataset.name;
                    const value = e.target.dataset.value;
                    if (docId) {
                        openEditModal(docId, name, value); 
                    }
                }
            };

            // --- *** Daily Plan Logic (HEAVILY UPDATED for SortableJS) *** ---
            const dailyExerciseForm = document.getElementById('daily-exercise-form');
            const dailyPlanList = document.getElementById('daily-plan-list');
            const dailyPlanCollectionRef = collection(db, dailyPlanCollectionPath);
            
            const unsubPlan = onSnapshot(query(dailyPlanCollectionRef), (snapshot) => {
                dailyPlanList.innerHTML = '';
                if (snapshot.empty) {
                    dailyPlanList.innerHTML = '<p class="text-center text-slate-500">Your workout plan is empty. Add an exercise to get started!</p>';
                    return;
                }
                const exercises = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                
                const groupedByDate = exercises.reduce((acc, exercise) => {
                    const date = exercise.exerciseDate;
                    if (!acc[date]) acc[date] = [];
                    acc[date].push(exercise);
                    return acc;
                }, {});

                const sortedDates = Object.keys(groupedByDate).sort();

                sortedDates.forEach(date => {
                    const dateGroup = document.createElement('div');
                    const formattedDate = new Date(date + 'T00:00:00').toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                    dateGroup.innerHTML = `<h4 class="text-xl font-bold mb-3 text-slate-400">${formattedDate}</h4>`;
                    
                    const exerciseList = document.createElement('ul');
                    exerciseList.className = 'space-y-3';
                    
                    groupedByDate[date].sort((a, b) => a.priority - b.priority);

                    groupedByDate[date].forEach((ex) => {
                        const li = document.createElement('li');
                        li.className = 'daily-exercise-item';
                        li.dataset.id = ex.id; // *** NEW: Set data-id on the li itself ***

                        // *** NEW: Updated HTML with drag handle, removed up/down buttons ***
                        li.innerHTML = `
                            <span class="drag-handle" title="Drag to reorder">&#9776;</span>
                            <div class="flex-grow">
                                <p class="font-semibold text-white">${ex.exerciseName}</p>
                                <p class="text-sm text-slate-400">${ex.sets} sets x ${ex.reps} reps</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <button data-id="${ex.id}" data-name="${ex.exerciseName}" data-date="${ex.exerciseDate}" data-sets="${ex.sets}" data-reps="${ex.reps}" class="edit-daily-exercise-btn text-blue-400 hover:text-blue-300 text-sm font-medium">Edit</button>
                                <button data-id="${ex.id}" class="delete-daily-exercise-btn text-rose-500 hover:text-rose-400 text-2xl font-bold">&times;</button>
                            </div>
                        `;
                        exerciseList.appendChild(li);
                    });
                    
                    dateGroup.appendChild(exerciseList);
                    dailyPlanList.appendChild(dateGroup);

                    // *** NEW: Initialize SortableJS on this list ***
                    new Sortable(exerciseList, {
                        animation: 150,
                        handle: '.drag-handle', // Specify the drag handle
                        ghostClass: 'sortable-ghost', // Class for the placeholder
                        onEnd: async (evt) => {
                            const items = evt.target.children; // Get all <li> elements in their new order
                            const batch = writeBatch(db);
                            
                            Array.from(items).forEach((item, index) => {
                                const docId = item.dataset.id;
                                if (docId) {
                                    const docRef = doc(db, dailyPlanCollectionPath, docId);
                                    batch.update(docRef, { priority: index }); // Update priority to the new index
                                }
                            });
                            
                            try {
                                await batch.commit();
                                showToast('Plan order updated!');
                            } catch (err) {
                                console.error("Error updating plan order: ", err);
                                showToast('Error updating order.', true);
                            }
                        }
                    });

                });
            }, console.error);
            dbListeners.push(unsubPlan);

            // Updated form submission (Identical to previous step)
            dailyExerciseForm.onsubmit = async (e) => {
                e.preventDefault();
                const exerciseName = document.getElementById('daily-exercise-name').value.trim();
                const exerciseDate = document.getElementById('exercise-date').value;
                const sets = document.getElementById('daily-exercise-sets').value.trim();
                const reps = document.getElementById('daily-exercise-reps').value.trim();
                if (!exerciseName || !exerciseDate || !sets || !reps) return;
                try {
                    const q = query(dailyPlanCollectionRef, where("exerciseDate", "==", exerciseDate), orderBy("priority", "desc"), limit(1));
                    const querySnapshot = await getDocs(q);
                    let newPriority = 0;
                    if (!querySnapshot.empty) {
                        newPriority = querySnapshot.docs[0].data().priority + 1;
                    }
                    await addDoc(dailyPlanCollectionRef, { 
                        exerciseName, 
                        exerciseDate, 
                        sets, 
                        reps, 
                        createdAt: Timestamp.now(),
                        priority: newPriority 
                    });
                    dailyExerciseForm.reset();
                    showToast('Exercise added to plan!'); 
                } catch (err) { 
                    console.error("Error adding daily exercise: ", err); 
                    showToast('Error adding exercise.', true); 
                }
            };

            // *** NEW: Simplified click handler (removed move-plan-item-btn logic) ***
            dailyPlanList.onclick = async (e) => {
                const target = e.target.closest('button'); 
                if (!target) return;

                if (target.classList.contains('delete-daily-exercise-btn')) {
                    const docId = target.dataset.id;
                    if (docId) {
                        openDeletePlanModal(docId); 
                    }
                }
                if (target.classList.contains('edit-daily-exercise-btn')) {
                    const { id, name, date, sets, reps } = target.dataset;
                    if (id) {
                        openEditPlanModal(id, name, date, sets, reps); 
                    }
                }
            };
        }


        // --- Auth Form Handling (Identical) ---
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const loginError = document.getElementById('login-error');
        const signupError = document.getElementById('signup-error');
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            loginError.textContent = '';
            const email = loginForm['login-email'].value;
            const password = loginForm['login-password'].value;
            signInWithEmailAndPassword(auth, email, password)
                .catch(err => {
                    if (err.code === 'auth/user-not-found' || err.code === 'auth/wrong-password' || err.code === 'auth/invalid-credential') {
                        loginError.textContent = 'Invalid email or password.';
                    } else {
                        loginError.textContent = err.message;
                    }
                });
        });
        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            signupError.textContent = '';
            const email = signupForm['signup-email'].value;
            const password = signupForm['signup-password'].value;
            createUserWithEmailAndPassword(auth, email, password)
                .catch(err => {
                    if (err.code === 'auth/email-already-in-use') {
                        signupError.textContent = 'An account with this email already exists.';
                    } else if (err.code === 'auth/weak-password') {
                        signupError.textContent = 'Password must be at least 6 characters long.';
                    } else {
                        signupError.textContent = err.message;
                    }
                });
        });

        // --- Logout (Identical) ---
        const handleLogout = () => signOut(auth);
        authButton.addEventListener('click', () => auth.currentUser ? handleLogout() : showPage('auth'));
        mobileAuthButton.addEventListener('click', () => auth.currentUser ? handleLogout() : showPage('auth'));
        
        // --- Auth Form Toggling (Identical) ---
        const authSubtitle = document.getElementById('auth-subtitle');
        document.getElementById('show-signup').addEventListener('click', (e) => {
            e.preventDefault();
            loginContainer.classList.add('hidden');
            signupContainer.classList.remove('hidden');
            authSubtitle.textContent = "Your transformation starts here.";
        });
        document.getElementById('show-login').addEventListener('click', (e) => {
            e.preventDefault();
            signupContainer.classList.add('hidden');
            loginContainer.classList.remove('hidden');
            authSubtitle.textContent = "Login to unleash your potential.";
        });


        // --- Page Navigation & UI Logic (Identical) ---
        const pages = document.querySelectorAll('.page-content');
        const navLinks = document.querySelectorAll('.nav-link');
        function showPage(pageId) {
            const homeBg = document.getElementById('home-background');
            const workoutsBg = document.getElementById('workouts-background');
            const planBg = document.getElementById('plan-background');
            const toolsBg = document.getElementById('tools-background');
            const workoutPages = ['workouts', 'cardio-exercises', 'strength-exercises', 'flex-exercises', 'hiit-exercises', 'bodyweight-exercises', 'core-exercises'];
            const backgrounds = {
                home: homeBg,
                workouts: workoutsBg,
                plan: planBg,
                tools: toolsBg
            };
            Object.values(backgrounds).forEach(bg => bg.classList.add('hidden'));
            if (pageId === 'auth') {
                mainContent.classList.add('hidden');
                authPage.classList.remove('hidden');
                return;
            }
            if (auth.currentUser) {
                if (pageId === 'home') backgrounds.home.classList.remove('hidden');
                else if (workoutPages.includes(pageId)) backgrounds.workouts.classList.remove('hidden');
                else if (pageId === 'plan') backgrounds.plan.classList.remove('hidden');
                else if (pageId === 'tools') backgrounds.tools.classList.remove('hidden');
                mainContent.classList.remove('hidden');
                authPage.classList.add('hidden');
                pages.forEach(page => page.classList.add('hidden'));
                document.getElementById(`page-${pageId}`)?.classList.remove('hidden');
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.page === pageId);
                });
                window.scrollTo(0, 0);
            } else {
                showPage('auth');
            }
        }
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(link.dataset.page);
                document.getElementById('mobile-menu').classList.toggle('hidden');
            });
        });
        document.body.addEventListener('click', (e) => {
            let target = e.target;
            while (target && target !== document.body) {
                if (target.matches('[data-page-btn]')) {
                    e.preventDefault();
                    const pageId = target.dataset.pageBtn;
                    showPage(pageId);
                    return;
                }
                target = target.parentElement;
            }
        });

        // --- Initial setup (Identical) ---
         const formatDate = (date) => {
            const d = new Date(date);
            const year = d.getFullYear();
            const month = (`0${d.getMonth() + 1}`).slice(-2);
            const day = (`0${d.getDate()}`).slice(-2);
            return `${year}-${month}-${day}`;
         }
        document.getElementById('set-date-today').addEventListener('click', () => {
            document.getElementById('exercise-date').value = formatDate(new Date());
        });
        document.getElementById('set-date-tomorrow').addEventListener('click', () => {
              const tomorrow = new Date();
              tomorrow.setDate(tomorrow.getDate() + 1);
              document.getElementById('exercise-date').value = formatDate(tomorrow);
        });
        document.getElementById('calculate-bmi').addEventListener('click', () => {
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const resultDiv = document.getElementById('bmi-result');
            if (isNaN(height) || isNaN(weight) || height <= 0 || weight <= 0) {
                 resultDiv.innerHTML = `<p class="text-rose-400">Please enter a valid height and weight.</p>`;
                 resultDiv.classList.remove('hidden');
                 return;
            }
            resultDiv.innerHTML = `<p>Your BMI is: <span id="bmi-value" class="gradient-text"></span></p><p>Category: <span id="bmi-category" class="text-white"></span></p>`;
            const bmiValueSpan = document.getElementById('bmi-value');
            const bmiCategorySpan = document.getElementById('bmi-category');
            const bmi = (weight / ((height / 100) ** 2)).toFixed(1);
            bmiValueSpan.textContent = bmi;
            let category = '', color = '';
            if (bmi < 18.5) { category = 'Underweight'; color = 'text-blue-400'; } 
            else if (bmi < 24.9) { category = 'Normal weight'; color = 'text-green-400'; } 
            else if (bmi < 29.9) { category = 'Overweight'; color = 'text-yellow-400'; } 
            else { category = 'Obesity'; color = 'text-red-400'; }
            bmiCategorySpan.textContent = category;
            bmiCategorySpan.className = color;
            resultDiv.classList.remove('hidden');
        });
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });
    </script>
</body>
</html>
